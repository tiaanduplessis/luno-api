<div align="center">
  <img 
  width="20%" src="https://lh3.googleusercontent.com/4leoJ3OsoYPwq4fpJIJVT53mfwxwhoghBU24W2c5JF2enj2eldt9VnNYLBt6enrchQ=w300" alt=""/>
</div>
<h1 align="center">luno-api</h1>
<div align="center">
  <strong>Luno API wrapper</strong>
</div>
<br>
<div align="center">
  <a href="https://npmjs.org/package/luno-api">
    <img src="https://img.shields.io/npm/v/luno-api.svg?style=flat-square" alt="npm package version" />
  </a>
  <a href="https://npmjs.org/package/luno-api">
  <img src="https://img.shields.io/npm/dm/luno-api.svg?style=flat-square" alt="npm downloads" />
  </a>
  <a href="https://github.com/feross/standard">
    <img src="https://img.shields.io/badge/code%20style-standard-brightgreen.svg?style=flat-square" alt="standard JS linter" />
  </a>
  <a href="https://github.com/prettier/prettier">
    <img src="https://img.shields.io/badge/styled_with-prettier-ff69b4.svg?style=flat-square" alt="prettier code formatting" />
  </a>
<a href="https://codecov.io/gh/tiaanduplessis/luno-api">
  <img src="https://codecov.io/gh/tiaanduplessis/luno-api/branch/master/graph/badge.svg?style=flat-square" alt="Codecov" />
</a>
  <a href="https://travis-ci.org/tiaanduplessis/luno-api">
    <img src="https://img.shields.io/travis/tiaanduplessis/luno-api.svg?style=flat-square" alt="travis ci build status" />
  </a>
  <a href="https://github.com/tiaanduplessis/luno-api/blob/master/LICENSE">
    <img src="https://img.shields.io/npm/l/luno-api.svg?style=flat-square" alt="project license" />
  </a>
  <a href="http://makeapullrequest.com">
    <img src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square" alt="make a pull request" />
  </a>
</div>
<br>
<div align="center">
  <a href="https://github.com/tiaanduplessis/luno-api/watchers">
    <img src="https://img.shields.io/github/watchers/tiaanduplessis/luno-api.svg?style=social" alt="Github Watch Badge" />
  </a>
  <a href="https://github.com/tiaanduplessis/luno-api/stargazers">
    <img src="https://img.shields.io/github/stars/tiaanduplessis/luno-api.svg?style=social" alt="Github Star Badge" />
  </a>
  <a href="https://twitter.com/intent/tweet?text=Check%20out%20luno-api!%20https://github.com/tiaanduplessis/luno-api%20%F0%9F%91%8D">
    <img src="https://img.shields.io/twitter/url/https/github.com/tiaanduplessis/luno-api.svg?style=social" alt="Tweet" />
  </a>
</div>
<br>
<div align="center">
  Built with ❤︎ by <a href="https://github.com/tiaanduplessis">tiaanduplessis</a> and <a href="https://github.com/tiaanduplessis/luno-api/contributors">contributors</a>
</div>

<h2>Table of Contents</h2>
<details>
  <summary>Table of Contents</summary>
  <li><a href="#about">About</a></li>
  <li><a href="#install">Install</a></li>
  <li><a href="#usage">Usage</a></li>
  <li><a href="#api">API</a></li>
  <li><a href="#contribute">Contribute</a></li>
  <li><a href="#license">License</a></li>
</details>

## About

Promise based wrapper around the [Luno API](https://www.luno.com/en/api).

## Install

```sh
$ npm install luno-api
# OR
$ yarn add luno-api
```

## Usage

Wrapper requires a `key` and `secret` that can be found in your [settings](https://www.luno.com/wallet/settings/api_keys)

```js
const Luno = require('luno-api')

const client = new Luno({
  key: 'YOUR_KEY',
  secret: 'YOUR_SECRET',
  defaultPair: 'XBTZAR' // Default pair that is used for requests. if not provided, it will be set to XBTZAR
})

client.getTicker().then(console.log).catch(console.log)
```

See [API](#api) section for all possible methods.

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### getTicker

Returns the latest ticker indicators.

**Parameters**

-   `pair` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Currency pair e.g. XBTZAR

**Examples**

```javascript
client.getTicker().then(console.log).catch(console.log)
```

### getAllTickers

Returns the latest ticker indicators from all active Luno exchanges.

**Examples**

```javascript
client.getAllTickers().then(console.log).catch(console.log)
```

### getOrderBook

Returns a list of bids and asks in the order book

**Parameters**

-   `pair` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Currency pair e.g. XBTZAR

**Examples**

```javascript
client.getOrderBook().then(console.log).catch(console.log)
```

### getTrades

Returns a list of the most recent trades.
At most 100 results are returned per call.

**Parameters**

-   `since` **([Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) \| [String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date))?** Fetch trades executed after this time
-   `pair` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Currency pair e.g. XBTZAR

**Examples**

```javascript
client.getTrades(new Date('7/7/7')).then(console.log).catch(console.log)
```

### createAccount

Create an additional account for the specified currency.

**Parameters**

-   `name` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The label to use for this account e.g. "Trading ACC" (optional, default `''`)
-   `currency` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The currency code for the account you want to create e.g. XBT, IDR, MYR, ZAR (optional, default `''`)

### getBalances

Return the list of all accounts and their respective balances.

**Examples**

```javascript
client.getBalances().then(console.log).catch(console.log)
```

### getTransactions

Return a list of transaction entries from an account.
 By default fetches the 100 most recent rows.

**Parameters**

-   `id` **([String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number))** Account ID (optional, default `''`)
-   `minRow` **([String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number))?** Minimum of the row range to return (inclusive) (optional, default `-100`)
-   `maxRow` **([String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number))?** Maximum of the row range to return (exclusive) (optional, default `0`)

### getPendingTransactions

Return a list of all pending transactions related to the account.

**Parameters**

-   `id` **([String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number))** Account ID (optional, default `''`)

### getOrderList

Returns a list of the most recently placed orders

**Parameters**

-   `state` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Filter to only orders of this state e.g. PENDING
-   `pair` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Filter to only orders of this currency pair e.g. XBTZAR

### postOrder

Create a new trade order.

**Parameters**

-   `type` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** "BID" for a bid (buy) limit order or "ASK" for an ask (sell) limit order (optional, default `''`)
-   `volume` **([String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number))** Amount of Bitcoin to buy or sell as a decimal string in units of BTC e.g. "1.423" (optional, default `''`)
-   `price` **([String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number))** Limit price as a decimal string in units of ZAR/BTC e.g. "1200". (optional, default `''`)
-   `pair` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** The currency pair to trade e.g. XBTZAR (optional, default `''`)

### postMarketOrder

Create a new market order.

**Parameters**

-   `type` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** "BUY" to buy bitcoin, or "SELL" to sell bitcoin (optional, default `''`)
-   `volume` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** For a "BUY" order: amount of local currency (e.g. ZAR, MYR) to spend as a decimal string in units of the local currency e.g. "100.50".
                           For a "SELL" order: amount of Bitcoin to sell as a decimal string in units of BTC e.g. "1.423". (optional, default `''`)
-   `pair` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The currency pair to trade e.g. XBTZAR

### stopOrder

Request to stop an order.

**Parameters**

-   `id` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The order reference as a string e.g. BXMC2CJ7HNB88U4 (optional, default `''`)

### getOrder

Get an order by its id.

**Parameters**

-   `id` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The order ID (optional, default `''`)

**Examples**

```javascript
client.getOrder(1234).then(console.log).catch(console.log)
```

### getTradesList

Returns a list of your recent trades for a given pair, sorted by oldest first.

**Parameters**

-   `since` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Filter to trades on or after this timestamp, e.g. 1470810728478
-   `limit` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** Limit to this number of trades (min 1, max 100, default 100)
-   `pair` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Filter to trades of this currency pair e.g. XBTZAR

**Examples**

```javascript
client.getTradesList(new Date('7/7/7'), 50).then(console.log).catch(console.log)
```

### getReceiveAddress

Returns the default receive address associated with your account and the amount received via the address.
You can specify an optional address parameter to return information for a non-default receive address.
In the response, total_received is the total confirmed Bitcoin amount received excluding unconfirmed transactions.
total_unconfirmed is the total sum of unconfirmed receive transactions.

**Parameters**

-   `asset` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Currency code of the asset e.g. XBT (optional, default `''`)
-   `address` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Specific Bitcoin address to retrieve. If not provided, the default address will be used

**Examples**

```javascript
client.getReceiveAddress('XBT').then(console.log).catch(console.log)
```

### createReceiveAddress

Allocates a new receive address to your account.
There is a rate limit of 1 address per hour, but bursts of up to 10 addresses are allowed.

**Parameters**

-   `asset` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Currency code of the asset e.g. XBT (optional, default `''`)

**Examples**

```javascript
client.createReceiveAddress('XBT').then(console.log).catch(console.log)
```

### getFeeInfo

Returns your fees and 30 day trading volume (as of midnight) for a given pair.

**Parameters**

-   `pair` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Filter to trades of this currency pair e.g. XBTZAR (optional, default `''`)

**Examples**

```javascript
client.getFeeInfo('XBTZAR').then(console.log).catch(console.log)
```

### getWithdrawalRequests

Returns a list of withdrawal requests.

**Examples**

```javascript
client.getWithdrawalRequests().then(console.log).catch(console.log)
```

### requestWithdrawal

Creates a new withdrawal request.

**Parameters**

-   `type` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Withdrawal types e.g. ZAR_EFT, NAD_EFT, KES_MPESA, MYR_IBG, IDR_LLG (optional, default `''`)
-   `amount` **([String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number))** Amount to withdraw. The currency depends on the type
-   `beneficiaryId` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** The beneficiary ID of the bank account the withdrawal will be paid out to.
                                   This parameter is required if you have multiple bank accounts.

**Examples**

```javascript
client.requestWithdrawal('ZAR_EFT', 1000)
```

### getWithdrawalStatus

Returns the status of a particular withdrawal request.

**Parameters**

-   `id` **([String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number))** Withdrawal ID to retrieve

**Examples**

```javascript
client.getWithdrawalStatus(1234).then(console.log).catch(console.log)
```

### cancelWithdrawalRequest

Cancel a withdrawal request. This can only be done if the request is still in state PENDING.

**Parameters**

-   `id` **([String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number))** ID of the withdrawal to cancel

**Examples**

```javascript
client.cancelWithdrawalRequest(1234).then(console.log).catch(console.log)
```

### send

Send Bitcoin from your account to a Bitcoin address or email address.

**Parameters**

-   `amount` **([String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number))** Amount to send as a decimal string (optional, default `''`)
-   `currency` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Currency to send e.g. XBT (optional, default `''`)
-   `address` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Destination Bitcoin address or email address to send to (optional, default `''`)
-   `description` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Description for the transaction to record on the account statement
-   `message` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Message to send to the recipient. This is only relevant when sending to an email address

**Examples**

```javascript
client.send(1000, 'XBT', 'foo@bar.com')
```

### createQuote

Creates a new quote to buy or sell a particular amount.

**Parameters**

-   `type` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Possible types: BUY, SELL (optional, default `''`)
-   `amount` **([String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number))** Amount to buy or sell in the pair base currency (optional, default `''`)
-   `pair` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Currency pair to trade e.g. XBTZAR, XBTMYR. The pair can also be flipped if you want to buy or sell the counter currency (e.g. ZARXBT) (optional, default `''`)

**Examples**

```javascript
client.createQuote('BUY', 1000).then(console.log).catch(console.log)
```

### getQuote

Get the latest status of a quote.

**Parameters**

-   `id` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** ID of the quote to retrieve (optional, default `''`)

**Examples**

```javascript
client.getQuote(1234).then(console.log).catch(console.log)
```

### exerciseQuote

Exercise a quote to perform the trade. If there is sufficient balance available in your account, it will be debited and the counter amount credited.
An error is returned if the quote has expired or if you have insufficient available balance.

**Parameters**

-   `id` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** ID of the quote to exercise (optional, default `''`)

**Examples**

```javascript
client.exerciseQuote(1234).then(console.log).catch(console.log)
```

### discardQuote

Discard a quote. Once a quote has been discarded, it cannot be exercised even if it has not expired yet.

**Parameters**

-   `id` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** ID of the quote to discard (optional, default `''`)

**Examples**

```javascript
client.discardQuote(1234).then(console.log).catch(console.log)
```

## Contributing

Contributions are welcome!

1.  Fork it.
2.  Create your feature branch: `git checkout -b my-new-feature`
3.  Commit your changes: `git commit -am 'Add some feature'`
4.  Push to the branch: `git push origin my-new-feature`
5.  Submit a pull request :D

Or open up [a issue](https://github.com/tiaanduplessis/luno-api/issues).

## License

Licensed under the MIT License.
